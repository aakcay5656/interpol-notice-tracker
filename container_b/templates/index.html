<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interpol Red Notice Tracker</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #c8102e; margin-bottom: 30px; text-align: center; }
        .stats { display: flex; gap: 20px; margin-bottom: 30px; }
        .stat-card { flex: 1; background: #f8f9fa; padding: 20px; border-radius: 6px; text-align: center; }
        .stat-number { font-size: 32px; font-weight: bold; color: #c8102e; }
        .stat-label { color: #666; margin-top: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { background: #c8102e; color: white; padding: 12px; text-align: left; }
        td { padding: 12px; border-bottom: 1px solid #ddd; }
        tr:hover { background: #f8f9fa; }
        .updated { background: #fff3cd; animation: highlight 2s ease-in-out; }
        @keyframes highlight { 0% { background: #ffc107; } 100% { background: #fff3cd; } }
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .badge-update { background: #ffc107; color: #000; }
        .badge-new { background: #28a745; color: white; }
        .timestamp { font-size: 12px; color: #666; text-align: center; margin-top: 20px; }
        .refresh-btn { background: #c8102e; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin-bottom: 20px; }
        .refresh-btn:hover { background: #a00d25; }
    </style>
    <script>
        function autoRefresh() {
            setTimeout(() => location.reload(), 10000);
        }
        window.onload = autoRefresh;
    </script>
</head>
<body>
    <div class="container">
        <h1>Interpol Red Notice Tracker</h1>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number">{{ notices|length }}</div>
                <div class="stat-label">Toplam Kayit</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ notices|selectattr("is_updated")|list|length }}</div>
                <div class="stat-label">Guncellenen Kayitlar</div>
            </div>
        </div>

        <button class="refresh-btn" onclick="location.reload()">Yenile</button>

        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Ad Soyad</th>
                    <th>Dogum Tarihi</th>
                    <th>Uyruk</th>
                    <th>Guncelleme Zamani</th>
                    <th>Durum</th>
                </tr>
            </thead>
            <tbody>
                {% for notice in notices %}
                <tr class="{% if notice.is_updated %}updated{% endif %}">
                    <td>{{ notice.entity_id }}</td>
                    <td>{{ notice.forename }} {{ notice.name }}</td>
                    <td>{{ notice.date_of_birth or 'N/A' }}</td>
                    <td>{{ notice.nationalities|join(', ') if notice.nationalities else 'N/A' }}</td>
                    <td>{{ notice.updated_at }}</td>
                    <td>
                        {% if notice.is_updated %}
                        <span class="badge badge-update">GUNCELLENDI</span>
                        {% else %}
                        <span class="badge badge-new">YENÄ°</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="timestamp">
    Son Yenileme: {{ current_time }}
</div>
    </div>
</body>
</html>
